import{c as F,j as r,r as d,aL as J,z as G,W as K,aI as Y,_ as S,aT as Q,aJ as Z,aU as ee,aV as V,R as _,u as te,a as ne,b as k,I as j,E as re,h as ie}from"./index-9d46c87f.js";import{P as X,d as se}from"./Close-0cb0570d.js";import{b as oe,C as ae,W as le,H as ce,c as de,d as ue,B as fe,a as pe}from"./PostModalStyled-90e49d7c.js";import{T as he}from"./Tooltip-5149e667.js";import{D as me}from"./DialogTitle-ca37f03e.js";import"./styled-75809262.js";import"./Input-f57ea956.js";import"./useFormControl-fffb245f.js";import"./Button-8bf7d3a4.js";import"./Dialog-ef753470.js";import"./Modal-c3b73e07.js";const ge=F(r("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined"),Ee=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function xe(s,i,a){const t=i.getBoundingClientRect(),n=a&&a.getBoundingClientRect(),h=Y(i);let p;if(i.fakeTransform)p=i.fakeTransform;else{const l=h.getComputedStyle(i);p=l.getPropertyValue("-webkit-transform")||l.getPropertyValue("transform")}let g=0,u=0;if(p&&p!=="none"&&typeof p=="string"){const l=p.split("(")[1].split(")")[0].split(",");g=parseInt(l[4],10),u=parseInt(l[5],10)}return s==="left"?n?`translateX(${n.right+g-t.left}px)`:`translateX(${h.innerWidth+g-t.left}px)`:s==="right"?n?`translateX(-${t.right-n.left-g}px)`:`translateX(-${t.left+t.width-g}px)`:s==="up"?n?`translateY(${n.bottom+u-t.top}px)`:`translateY(${h.innerHeight+u-t.top}px)`:n?`translateY(-${t.top-n.top+t.height-u}px)`:`translateY(-${t.top+t.height-u}px)`}function ye(s){return typeof s=="function"?s():s}function W(s,i,a){const t=ye(a),n=xe(s,i,t);n&&(i.style.webkitTransform=n,i.style.transform=n)}const Ce=d.forwardRef(function(i,a){const t=J(),n={enter:t.transitions.easing.easeOut,exit:t.transitions.easing.sharp},h={enter:t.transitions.duration.enteringScreen,exit:t.transitions.duration.leavingScreen},{addEndListener:p,appear:g=!0,children:u,container:l,direction:m="down",easing:w=n,in:E,onEnter:v,onEntered:R,onEntering:P,onExit:y,onExited:L,onExiting:C,style:x,timeout:b=h,TransitionComponent:z=Q}=i,T=G(i,Ee),f=d.useRef(null),B=K(u.ref,f,a),o=e=>c=>{e&&(c===void 0?e(f.current):e(f.current,c))},$=o((e,c)=>{W(m,e,l),ee(e),v&&v(e,c)}),I=o((e,c)=>{const O=V({timeout:b,style:x,easing:w},{mode:"enter"});e.style.webkitTransition=t.transitions.create("-webkit-transform",S({},O)),e.style.transition=t.transitions.create("transform",S({},O)),e.style.webkitTransform="none",e.style.transform="none",P&&P(e,c)}),M=o(R),A=o(C),N=o(e=>{const c=V({timeout:b,style:x,easing:w},{mode:"exit"});e.style.webkitTransition=t.transitions.create("-webkit-transform",c),e.style.transition=t.transitions.create("transform",c),W(m,e,l),y&&y(e)}),U=o(e=>{e.style.webkitTransition="",e.style.transition="",L&&L(e)}),q=e=>{p&&p(f.current,e)},D=d.useCallback(()=>{f.current&&W(m,f.current,l)},[m,l]);return d.useEffect(()=>{if(E||m==="down"||m==="right")return;const e=Z(()=>{f.current&&W(m,f.current,l)}),c=Y(f.current);return c.addEventListener("resize",e),()=>{e.clear(),c.removeEventListener("resize",e)}},[m,E,l]),d.useEffect(()=>{E||D()},[E,D]),r(z,S({nodeRef:f,onEnter:$,onEntered:M,onEntering:I,onExit:N,onExited:U,onExiting:A,addEndListener:q,appear:g,in:E,timeout:b},T,{children:(e,c)=>d.cloneElement(u,S({ref:B,style:S({visibility:e==="exited"&&!E?"hidden":void 0},x,u.props.style)},c))}))}),be=Ce,Te=_.forwardRef(function(i,a){return r(be,{direction:"up",ref:a,...i})}),H=s=>{const{children:i,onClose:a,...t}=s;return k(me,{sx:{m:0,p:2},...t,children:[i,a?r(j,{"aria-label":"close",onClick:a,sx:{position:"absolute",right:8,top:8,color:n=>n.palette.grey[500]},children:r(se,{})}):null]})};H.propTypes={children:X.node,onClose:X.func.isRequired};const Ie=({fetchAgain:s,setFetchAgain:i})=>{const[a,t]=d.useState(""),n=d.useRef(null),[h,p]=d.useState(null),[g,u]=_.useState(!1),[l,m]=d.useState(null),[w,E]=d.useState(null),[v,R]=d.useState(!1),[P,y]=d.useState(!1),{loading:L,error:C,message:x}=te(o=>o.like),b=ne(),z=()=>{u(!0)},T=()=>{u(!1)},f=o=>{const $=new FileReader;o.target.files[0]&&($.readAsDataURL(o.target.files[0]),$.onload=I=>{p(I.target.result)})},B=o=>{o.preventDefault(),b(ie(a,h))};return d.useEffect(()=>{C&&(R(!0),m(C)),x&&(i(!s),T(),y(!0),E(x))},[C,x,i,s]),k("div",{children:[r("div",{style:{display:"flex",justifyContent:"center"},children:r(he,{title:"Add a photo",children:r(j,{onClick:z,children:r(ge,{})})})}),r(oe,{open:g,TransitionComponent:Te,keepMounted:!0,onClose:T,"aria-describedby":"alert-dialog-slide-description","aria-labelledby":"customized-dialog-title",children:r(ae,{children:k(le,{children:[r(H,{id:"customized-dialog-title",onClose:T}),k(ce,{children:[h?r("div",{className:"container",children:r("img",{src:h,onClick:()=>n.current.click(),alt:"selected"})}):r(j,{onClick:()=>n.current.click(),children:r(de,{})}),r("input",{type:"file",accept:".jpg,.png,.jpeg",hidden:!0,onChange:f,ref:n})]}),k(ue,{children:[r(fe,{fullWidth:!0,type:"text",value:a,onChange:o=>t(o.target.value),placeholder:"Captions"}),r(pe,{disabled:!h,variant:"contained",type:"submit",onClick:B,children:L?"Submitting":"Submit"})]})]})})}),r(re,{open:v,openS:P,error:l,success:w,setOpenE:R,setOpenS:y})]})};export{Ie as default};
